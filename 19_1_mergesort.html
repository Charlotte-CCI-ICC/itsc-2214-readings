<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.33">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>39&nbsp; The Merge Sort Algorithm – ITSC 2214 - Data Structures and Algorithms</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./20_trees.html" rel="next">
<link href="./19_binary_search.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-07ba0ad10f5680c660e360ac31d2f3b6.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-3fbf620316015237a6991a5ebc2a9eb0.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./18_recursion.html">Recursion</a></li><li class="breadcrumb-item"><a href="./19_1_mergesort.html"><span class="chapter-number">39</span>&nbsp; <span class="chapter-title">The Merge Sort Algorithm</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">ITSC 2214 - Data Structures and Algorithms</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Preface</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">Programming Labs</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./labs/00_installing_req_software.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Installing Required Software</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./labs/01_using_autograder.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Using the Autograder</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./labs/02_1l_java_ide_practice-1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">1L. Java and IDE Practice - 1</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./labs/04_3l_test_driven_development.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">3L. Test-Driven Development</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./labs/05_4l_generics_in_java-1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">4L. Generics In Java- 1</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./labs/06_5l_generics_in_java-1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">5L. Generics In Java- 2</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./labs/07_6L_write_junit_test-1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">6L. Writing JUnit Tests - 1</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./labs/08_7L_write_junit_test-2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">7L. Writing JUnit Tests - 2</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./labs/09_8l_iterative_search_and_sort.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">8L. Iterative Search and Sort</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./labs/10_9L_implementing_arraylist.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">9L. Implementing ArrayList</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./labs/11_10L_implementing_Linkedlist.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">10L. Implementing Linked-Lists</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./labs/12_11l_Implementing_Arraystacks.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">11L. Implementing ArrayStacks</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./labs/13_12L_Implementing_LinkedStacks.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">12L. Implementing LinkedStacks</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./labs/14_13L_Implementing_ArrayQueue.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">13L. Implementing ArrayQueue</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./labs/15_14L_Implementing_LinkedQueue.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">14L. Implementing LinkedQueue</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./labs/16_15L_Recursive_MergeSort_and_QuickSort.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">15L. MergeSort and QuickSort</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./labs/17_16L_Binary_Search_Tree.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">16L. Binary Search Trees</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./labs/18_17L_Implementing_Graphs.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">17L. Implementing Graphs</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true">
 <span class="menu-text">On Computers and Computing</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./01_intro_to_cs_dsa.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Background on Computer Science and Data Structures</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./02_general_purpose_computers.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">Modern General-Purpose, Programmable Computers</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true">
 <span class="menu-text">Java Generics</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./02_1_compilers_types.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">21</span>&nbsp; <span class="chapter-title">Java Compiler and Types</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true">
 <span class="menu-text">Algorithmic Analysis</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03_algorithmic_analysis.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">22</span>&nbsp; <span class="chapter-title">Algorithmic Analysis</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true">
 <span class="menu-text">Unit Testing</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./04_unit_testing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">23</span>&nbsp; <span class="chapter-title">Unit Testing and Test-Driven Development</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./05_writing_junit_tests.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">24</span>&nbsp; <span class="chapter-title">Writing JUnit Tests and Test-Driven Development</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./06_mutation_testing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">25</span>&nbsp; <span class="chapter-title">Introduction to Mutation Testing</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./07_list_of_mutators.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">26</span>&nbsp; <span class="chapter-title">List of Mutators</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="true">
 <span class="menu-text">Iterative Sorting and Searching</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./08_sorting_intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">27</span>&nbsp; <span class="chapter-title">Introduction to Sorting</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./09_comparable_comparator.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">28</span>&nbsp; <span class="chapter-title">Comparable and Comparator</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./10_bubble_selection_insertion_sort.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">29</span>&nbsp; <span class="chapter-title">Bubble, Selection, and Insertion Sort</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./11_linear_search.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">30</span>&nbsp; <span class="chapter-title">Linear Search</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" role="navigation" aria-expanded="true">
 <span class="menu-text">Sequential Collections of Data</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-7" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./12_collections_of_data_intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">31</span>&nbsp; <span class="chapter-title">Collections of Data</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./13_operations_on_lists.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">32</span>&nbsp; <span class="chapter-title">Operations on Lists</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./14_implementing_arraylists.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">33</span>&nbsp; <span class="chapter-title">Implementing Array-backed Lists</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./15_implementing_linkedlists.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">34</span>&nbsp; <span class="chapter-title">Implementing Linked Lists</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-8" role="navigation" aria-expanded="true">
 <span class="menu-text">Stacks and Queues</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-8" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-8" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./16_stack.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">35</span>&nbsp; <span class="chapter-title">Stack Data Structure</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./17_queue.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">36</span>&nbsp; <span class="chapter-title">Queue Data Structure</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-9" role="navigation" aria-expanded="true">
 <span class="menu-text">Recursion</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-9" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-9" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./18_recursion.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">37</span>&nbsp; <span class="chapter-title">Recursion</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./19_binary_search.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">38</span>&nbsp; <span class="chapter-title">Binary Search</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./19_1_mergesort.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">39</span>&nbsp; <span class="chapter-title">The Merge Sort Algorithm</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-10" role="navigation" aria-expanded="true">
 <span class="menu-text">Trees and Graphs</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-10" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-10" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./20_trees.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">40</span>&nbsp; <span class="chapter-title">Tree Data Structure</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./21_graphs.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">41</span>&nbsp; <span class="chapter-title">Graphs</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-11" role="navigation" aria-expanded="true">
 <span class="menu-text">Hashing</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-11" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-11" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./22_hashing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">42</span>&nbsp; <span class="chapter-title">Hashing, Hash Tables, and Hash Maps</span></span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#starting-with-insertion-sort" id="toc-starting-with-insertion-sort" class="nav-link active" data-scroll-target="#starting-with-insertion-sort"><span class="header-section-number">39.1</span> Starting with Insertion Sort</a></li>
  <li><a href="#trying-the-split-approach" id="toc-trying-the-split-approach" class="nav-link" data-scroll-target="#trying-the-split-approach"><span class="header-section-number">39.2</span> Trying the Split Approach</a></li>
  <li><a href="#discovering-the-merge" id="toc-discovering-the-merge" class="nav-link" data-scroll-target="#discovering-the-merge"><span class="header-section-number">39.3</span> Discovering the Merge</a></li>
  <li><a href="#from-one-split-to-many" id="toc-from-one-split-to-many" class="nav-link" data-scroll-target="#from-one-split-to-many"><span class="header-section-number">39.4</span> From One Split to Many</a></li>
  <li><a href="#making-our-code-split-recursively" id="toc-making-our-code-split-recursively" class="nav-link" data-scroll-target="#making-our-code-split-recursively"><span class="header-section-number">39.5</span> Making Our Code Split Recursively</a></li>
  <li><a href="#understanding-the-efficiency" id="toc-understanding-the-efficiency" class="nav-link" data-scroll-target="#understanding-the-efficiency"><span class="header-section-number">39.6</span> Understanding the Efficiency</a>
  <ul class="collapse">
  <li><a href="#the-merge-step" id="toc-the-merge-step" class="nav-link" data-scroll-target="#the-merge-step"><span class="header-section-number">39.6.1</span> The Merge Step</a></li>
  <li><a href="#the-complete-picture" id="toc-the-complete-picture" class="nav-link" data-scroll-target="#the-complete-picture"><span class="header-section-number">39.6.2</span> The Complete Picture</a></li>
  </ul></li>
  <li><a href="#putting-it-all-together" id="toc-putting-it-all-together" class="nav-link" data-scroll-target="#putting-it-all-together"><span class="header-section-number">39.7</span> Putting It All Together</a></li>
  <li><a href="#one-more-thing-to-think-about" id="toc-one-more-thing-to-think-about" class="nav-link" data-scroll-target="#one-more-thing-to-think-about"><span class="header-section-number">39.8</span> One More Thing to Think About</a></li>
  <li><a href="#the-final-algorithm" id="toc-the-final-algorithm" class="nav-link" data-scroll-target="#the-final-algorithm"><span class="header-section-number">39.9</span> The Final Algorithm</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./18_recursion.html">Recursion</a></li><li class="breadcrumb-item"><a href="./19_1_mergesort.html"><span class="chapter-number">39</span>&nbsp; <span class="chapter-title">The Merge Sort Algorithm</span></a></li></ol></nav>
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">39</span>&nbsp; <span class="chapter-title">The Merge Sort Algorithm</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="starting-with-insertion-sort" class="level2" data-number="39.1">
<h2 data-number="39.1" class="anchored" data-anchor-id="starting-with-insertion-sort"><span class="header-section-number">39.1</span> Starting with Insertion Sort</h2>
<p>Let’s begin with the most intuitive way to sort numbers. Imagine you have a sequence of numbers:</p>
<pre><code>[7, 2, 4, 1, 5, 3]</code></pre>
<p>How would you sort this by hand? Most people would:</p>
<ol type="1">
<li>Look at each number</li>
<li>Find where it belongs in the sequence we’ve sorted so far</li>
<li>Insert it there</li>
</ol>
<p>Let’s implement this natural approach:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode java code-with-copy"><code class="sourceCode java"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">class</span> Sorting <span class="op">{</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="dt">static</span> <span class="dt">void</span> <span class="fu">insertionSort</span><span class="op">(</span><span class="dt">int</span><span class="op">[]</span> arr<span class="op">)</span> <span class="op">{</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>        <span class="co">// For each number (except the first one)</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> i <span class="op">&lt;</span> arr<span class="op">.</span><span class="fu">length</span><span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>            <span class="dt">int</span> current <span class="op">=</span> arr<span class="op">[</span>i<span class="op">];</span>  <span class="co">// The number we're placing</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>            <span class="dt">int</span> j <span class="op">=</span> i <span class="op">-</span> <span class="dv">1</span><span class="op">;</span>         <span class="co">// Look at previous numbers</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>            <span class="co">// Move larger numbers one position ahead</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>            <span class="cf">while</span> <span class="op">(</span>j <span class="op">&gt;=</span> <span class="dv">0</span> <span class="op">&amp;&amp;</span> arr<span class="op">[</span>j<span class="op">]</span> <span class="op">&gt;</span> current<span class="op">)</span> <span class="op">{</span></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>                arr<span class="op">[</span>j <span class="op">+</span> <span class="dv">1</span><span class="op">]</span> <span class="op">=</span> arr<span class="op">[</span>j<span class="op">];</span></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>                j<span class="op">--;</span></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>            <span class="co">// Place our number in the gap we created</span></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>            arr<span class="op">[</span>j <span class="op">+</span> <span class="dv">1</span><span class="op">]</span> <span class="op">=</span> current<span class="op">;</span></span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="dt">static</span> <span class="dt">void</span> <span class="fu">main</span><span class="op">(</span><span class="bu">String</span><span class="op">[]</span> args<span class="op">)</span> <span class="op">{</span></span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span><span class="op">[]</span> numbers <span class="op">=</span> <span class="op">{</span><span class="dv">7</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="dv">5</span><span class="op">,</span> <span class="dv">3</span><span class="op">};</span></span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a>        <span class="bu">System</span><span class="op">.</span><span class="fu">out</span><span class="op">.</span><span class="fu">println</span><span class="op">(</span><span class="st">"Before sorting: "</span> <span class="op">+</span> <span class="bu">Arrays</span><span class="op">.</span><span class="fu">toString</span><span class="op">(</span>numbers<span class="op">));</span></span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a>        <span class="fu">insertionSort</span><span class="op">(</span>numbers<span class="op">);</span></span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a>        <span class="bu">System</span><span class="op">.</span><span class="fu">out</span><span class="op">.</span><span class="fu">println</span><span class="op">(</span><span class="st">"After sorting:  "</span> <span class="op">+</span> <span class="bu">Arrays</span><span class="op">.</span><span class="fu">toString</span><span class="op">(</span>numbers<span class="op">));</span></span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Let’s trace what happens with our example:</p>
<pre><code>Step 0:    [7, 2, 4, 1, 5, 3]    Initial array
Step 1:    [2, 7, 4, 1, 5, 3]    Place 2 before 7
Step 2:    [2, 4, 7, 1, 5, 3]    Place 4 before 7
Step 3:    [1, 2, 4, 7, 5, 3]    Place 1 before 2
Step 4:    [1, 2, 4, 5, 7, 3]    Place 5 before 7
Step 5:    [1, 2, 3, 4, 5, 7]    Place 3 after 2</code></pre>
<p>This works! But let’s think about how much work we’re doing. For each number:</p>
<ul>
<li>We might need to shift ALL previous numbers up one position</li>
<li>The further right we go, the more numbers we might need to shift</li>
</ul>
<p>Let’s look at a worst-case scenario:</p>
<pre><code>Initial:    [5, 4, 3, 2, 1]
Place 4:    [4, 5, 3, 2, 1]    // 1 shift
Place 3:    [3, 4, 5, 2, 1]    // 2 shifts
Place 2:    [2, 3, 4, 5, 1]    // 3 shifts
Place 1:    [1, 2, 3, 4, 5]    // 4 shifts</code></pre>
<p>For an array of size n:</p>
<ul>
<li>First number: up to 1 shift</li>
<li>Second number: up to 2 shifts</li>
<li>Third number: up to 3 shifts …and so on.</li>
</ul>
<p>This means we’re doing 1 + 2 + 3 + … + (n-1) operations in the worst case. This sum equals (n-1)(n)/2, which means our algorithm takes O(n²) time in the worst case.</p>
<p>Can we do better?</p>
<p>Remember how we made binary search faster - by eliminating half the search space at each step. Could we use a similar idea here?</p>
<p>With binary search, we could ignore half the array because we knew our target wasn’t there. With sorting, we can’t ignore any numbers - they all need to end up in the right place! But what if, instead of ignoring half the numbers, we could somehow work on them separately? Let’s try a simple experiment. What if we:</p>
<ol type="1">
<li>Split our array in half</li>
<li>Sort each half using our insertion sort</li>
<li>Put them back together</li>
</ol>
<p>Let’s think about what that might look like:</p>
<pre><code>Original:     [7, 2, 4, 1, 5, 3]
Split:        [7, 2, 4] | [1, 5, 3]</code></pre>
<p>If we sort each half using our regular sort, how many operations would that take?</p>
<ul>
<li>Left half (size n/2): up to (n/2-1)(n/2)/2 operations</li>
<li>Right half (size n/2): up to (n/2-1)(n/2)/2 operations</li>
</ul>
<p>Let’s work out the math:</p>
<ul>
<li>Original algorithm: about n²/2 operations</li>
<li>With splitting: about n²/4 operations</li>
</ul>
<p>Hey - that’s interesting! It’s still O(n²), but we’ve cut the number of operations roughly in half!</p>
<p>Should we try implementing this idea? Even if it doesn’t give us a fundamentally faster algorithm, it might teach us something…</p>
</section>
<section id="trying-the-split-approach" class="level2" data-number="39.2">
<h2 data-number="39.2" class="anchored" data-anchor-id="trying-the-split-approach"><span class="header-section-number">39.2</span> Trying the Split Approach</h2>
<p>Since splitting might save us some work, let’s implement this idea step by step:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode java code-with-copy"><code class="sourceCode java"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="dt">static</span> <span class="dt">void</span> <span class="fu">splitAndSort</span><span class="op">(</span><span class="dt">int</span><span class="op">[]</span> arr<span class="op">)</span> <span class="op">{</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Base case: arrays of size 0 or 1 are already sorted</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>arr<span class="op">.</span><span class="fu">length</span> <span class="op">&lt;=</span> <span class="dv">1</span><span class="op">)</span> <span class="cf">return</span><span class="op">;</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Step 1: Split array in half</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> mid <span class="op">=</span> arr<span class="op">.</span><span class="fu">length</span> <span class="op">/</span> <span class="dv">2</span><span class="op">;</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span><span class="op">[]</span> left <span class="op">=</span> <span class="bu">Arrays</span><span class="op">.</span><span class="fu">copyOfRange</span><span class="op">(</span>arr<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> mid<span class="op">);</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span><span class="op">[]</span> right <span class="op">=</span> <span class="bu">Arrays</span><span class="op">.</span><span class="fu">copyOfRange</span><span class="op">(</span>arr<span class="op">,</span> mid<span class="op">,</span> arr<span class="op">.</span><span class="fu">length</span><span class="op">);</span></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Step 2: Sort each half using insertion sort</span></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">insertionSort</span><span class="op">(</span>left<span class="op">);</span></span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">insertionSort</span><span class="op">(</span>right<span class="op">);</span></span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Step 3: Put the sorted pieces back together</span></span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>    <span class="co">// (Our first attempt - just copy them back in order)</span></span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a>    <span class="bu">System</span><span class="op">.</span><span class="fu">arraycopy</span><span class="op">(</span>left<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> arr<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> left<span class="op">.</span><span class="fu">length</span><span class="op">);</span></span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a>    <span class="bu">System</span><span class="op">.</span><span class="fu">arraycopy</span><span class="op">(</span>right<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> arr<span class="op">,</span> left<span class="op">.</span><span class="fu">length</span><span class="op">,</span> right<span class="op">.</span><span class="fu">length</span><span class="op">);</span></span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Let’s try it with our example array and trace exactly what happens at each step:</p>
<pre><code>Original array: [7, 2, 4, 1, 5, 3]

Step 1 - Split:
  Left half:  [7, 2, 4]
  Right half: [1, 5, 3]

Step 2 - Sort each half:
  Left half:  [2, 4, 7]   ← Sorted using insertion sort
  Right half: [1, 3, 5]   ← Sorted using insertion sort

Step 3 - Combine:
  Result: [2, 4, 7, 1, 3, 5]   ← Oops!</code></pre>
<p>Wait - that’s not right! The numbers are sorted within each half, but our final array isn’t sorted. What went wrong?</p>
<p>Let’s look more carefully at what we have:</p>
<ul>
<li>Left half ([2, 4, 7]) is correctly sorted</li>
<li>Right half ([1, 3, 5]) is correctly sorted</li>
<li>But notice: 7 is greater than 1!</li>
</ul>
<p>Before we continue, take a moment to think:</p>
<ul>
<li>What information do we have that we’re not using?</li>
<li>Is there something special about these two halves that could help us?</li>
<li>What different approaches might fix this problem?</li>
</ul>
<p>[Space for thinking…]</p>
<p>Our simple approach of copying the halves back in order failed because numbers might need to end up in different positions than where they started. But we do know something useful - each half is already sorted!</p>
<p>Let’s explore how we might use this information. Try working through combining [2, 4, 7] and [1, 3, 5] by hand. What strategy would you use?</p>
<p>[Space for working it out…]</p>
<p>Let’s explore some possible strategies:</p>
<ol type="1">
<li><p>What if we took alternating elements? [2, 4, 7] and [1, 3, 5] -&gt; [2, 1, 4, 3, 7, 5] No, that’s still not sorted…</p></li>
<li><p>What if we took the smallest element first? Looking at [2, 4, 7] and [1, 3, 5]</p>
<ul>
<li>1 is the smallest overall, so take it Now looking at [2, 4, 7] and [3, 5]</li>
<li>2 is the smallest remaining…</li>
</ul></li>
</ol>
<p>Hey, that second idea seems promising! Let’s work through it completely:</p>
<p>[Space for working it out…]</p>
</section>
<section id="discovering-the-merge" class="level2" data-number="39.3">
<h2 data-number="39.3" class="anchored" data-anchor-id="discovering-the-merge"><span class="header-section-number">39.3</span> Discovering the Merge</h2>
<p>We found that taking the smallest element at each step might work. Let’s explore this idea more carefully.</p>
<p>Given our two sorted halves: [2, 4, 7] and [1, 3, 5]</p>
<p>Step 1: We need the smallest element overall</p>
<ul>
<li>Left half starts with 2</li>
<li>Right half starts with 1</li>
<li>1 is smaller, so it goes first</li>
<li>Now we have: [1] and need to merge [2, 4, 7] with [3, 5]</li>
</ul>
<p>Step 2: Looking at the fronts again</p>
<ul>
<li>Left half starts with 2</li>
<li>Right half starts with 3</li>
<li>2 is smaller, so it goes next</li>
<li>Now we have: [1, 2] and need to merge [4, 7] with [3, 5]</li>
</ul>
<p>Do you see a pattern forming? At each step, we:</p>
<ol type="1">
<li>Look at the front of both remaining sequences</li>
<li>Take the smaller one</li>
<li>Move forward in whichever pile we took from</li>
</ol>
<p>Before we try coding this, what information do we need to keep track of? Take a moment to list out the important pieces… We do that for you here:</p>
<p>Let’s visualize how merging works with a complete example.</p>
<p>Left array: [2, 4, 7] Right array: [1, 3, 5]</p>
<p>We’ll use ‘→’ to show which numbers we’re looking at, and put our result below:</p>
<p>Step 1: [→2, 4, 7] [→1, 3, 5] Result: [1] (1 was smaller)</p>
<p>Step 2: [→2, 4, 7] [ →3, 5] Result: [1, 2] (2 was smaller)</p>
<p>Step 3: [ →4, 7] [ →3, 5] Result: [1, 2, 3] (3 was smaller)</p>
<p>Step 4: [ →4, 7] [ →5] Result: [1, 2, 3, 4] (4 was smaller)</p>
<p>Step 5: [ →7] [ →5] Result: [1, 2, 3, 4, 5] (5 was smaller)</p>
<p>Step 6: [ →7] [ ] Result: [1, 2, 3, 4, 5, 7] (7 was all that’s left)</p>
<p>We probably need:</p>
<ol type="1">
<li>Our position in the left half (which number are we looking at?)</li>
<li>Our position in the right half</li>
<li>Where we’re putting numbers in our result</li>
</ol>
<p>Let’s start with just the first comparison. How would we write that?</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode java code-with-copy"><code class="sourceCode java"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co">// If we're looking at position leftPos in left half</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="co">// and position rightPos in right half...</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="op">(</span>left<span class="op">[</span>leftPos<span class="op">]</span> <span class="op">&lt;=</span> right<span class="op">[</span>rightPos<span class="op">])</span> <span class="op">{</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>    <span class="co">// The left number is smaller (or equal)</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>    <span class="co">// What should we do here?</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a><span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>    <span class="co">// The right number is smaller</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>    <span class="co">// What should we do here?</span></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Can you fill in what should happen in each case? Remember, we need to:</p>
<ul>
<li>Take the smaller number</li>
<li>Put it somewhere</li>
<li>Move forward in the correct half</li>
</ul>
<p>[Space for thinking…]</p>
<p>Let’s complete one case:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode java code-with-copy"><code class="sourceCode java"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="op">(</span>left<span class="op">[</span>leftPos<span class="op">]</span> <span class="op">&lt;=</span> right<span class="op">[</span>rightPos<span class="op">])</span> <span class="op">{</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Take the left number</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>    arr<span class="op">[</span>arrPos<span class="op">]</span> <span class="op">=</span> left<span class="op">[</span>leftPos<span class="op">];</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Move forward in left half</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>    leftPos<span class="op">++;</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Move forward in result</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>    arrPos<span class="op">++;</span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a><span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Can you fill in this part?</span></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Try completing the else case yourself before continuing…</p>
<p>[Space for coding…]</p>
<p>Now we can do one comparison, but we need to keep doing this until… when? Think about:</p>
<ul>
<li>When can we keep comparing numbers from both halves?</li>
<li>What happens when we run out of numbers in one half?</li>
</ul>
<p>[Space for thinking…]</p>
<p>We need to keep going while we have numbers in both halves:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode java code-with-copy"><code class="sourceCode java"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="cf">while</span> <span class="op">(</span>leftPos <span class="op">&lt;</span> left<span class="op">.</span><span class="fu">length</span> <span class="op">&amp;&amp;</span> rightPos <span class="op">&lt;</span> right<span class="op">.</span><span class="fu">length</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Our comparison code here</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>But what happens when one half is empty? Consider this case:</p>
<ul>
<li>Left half: [2, 4, 7]</li>
<li>Right half: [1, 3] After some merging:</li>
<li>Result so far: [1, 2, 3]</li>
<li>Left half remaining: [4, 7]</li>
<li>Right half remaining: []</li>
</ul>
<p>What should we do with the remaining numbers?</p>
<p>[Space for thinking…]</p>
<p>Since each half was sorted to begin with, if we have leftovers in one half, they must all be larger than what we’ve placed so far. We can just copy them over in order!</p>
<p>Would you like to try writing the complete merge code now? Here’s a template to start with:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode java code-with-copy"><code class="sourceCode java"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="dt">static</span> <span class="dt">void</span> <span class="fu">splitAndMergeSort</span><span class="op">(</span><span class="dt">int</span><span class="op">[]</span> arr<span class="op">)</span> <span class="op">{</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>arr<span class="op">.</span><span class="fu">length</span> <span class="op">&lt;=</span> <span class="dv">1</span><span class="op">)</span> <span class="cf">return</span><span class="op">;</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Split and sort as before</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> mid <span class="op">=</span> arr<span class="op">.</span><span class="fu">length</span> <span class="op">/</span> <span class="dv">2</span><span class="op">;</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span><span class="op">[]</span> left <span class="op">=</span> <span class="bu">Arrays</span><span class="op">.</span><span class="fu">copyOfRange</span><span class="op">(</span>arr<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> mid<span class="op">);</span></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span><span class="op">[]</span> right <span class="op">=</span> <span class="bu">Arrays</span><span class="op">.</span><span class="fu">copyOfRange</span><span class="op">(</span>arr<span class="op">,</span> mid<span class="op">,</span> arr<span class="op">.</span><span class="fu">length</span><span class="op">);</span></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">insertionSort</span><span class="op">(</span>left<span class="op">);</span></span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">insertionSort</span><span class="op">(</span>right<span class="op">);</span></span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Merging part:</span></span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> leftPos <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> rightPos <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> arrPos <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb11-16"><a href="#cb11-16" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb11-17"><a href="#cb11-17" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Your code here!</span></span>
<span id="cb11-18"><a href="#cb11-18" aria-hidden="true" tabindex="-1"></a>    <span class="co">// 1. While we have elements in both halves...</span></span>
<span id="cb11-19"><a href="#cb11-19" aria-hidden="true" tabindex="-1"></a>    <span class="co">// 2. Handle any remaining elements...</span></span>
<span id="cb11-20"><a href="#cb11-20" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Try completing this implementation yourself!</p>
<p>[Space for implementation…]</p>
</section>
<section id="from-one-split-to-many" class="level2" data-number="39.4">
<h2 data-number="39.4" class="anchored" data-anchor-id="from-one-split-to-many"><span class="header-section-number">39.4</span> From One Split to Many</h2>
<p>Remember how splitting once helped reduce our work? Let’s explore this further with larger arrays.</p>
<p>Consider sorting: [9, 3, 7, 1, 8, 2, 6, 5, 4]</p>
<p>With one split:</p>
<pre><code>Original:      [9, 3, 7, 1, 8, 2, 6, 5, 4]
Split once:    [9, 3, 7, 1] | [8, 2, 6, 5, 4]
After sorting: [1, 3, 7, 9] | [2, 4, 5, 6, 8]
Merged:        [1, 2, 3, 4, 5, 6, 7, 8, 9]</code></pre>
<p>This worked, but sorting those halves still takes quite a bit of work (as N is relatively large even after the first split). What if we split each half again?</p>
<pre><code>Level 1:      [9, 3, 7, 1, 8, 2, 6, 5, 4]
              /                          \
Level 2:  [9, 3, 7, 1]             [8, 2, 6, 5, 4]
          /           \             /             \
Level 3: [9, 3]    [7, 1]      [8, 2]        [6, 5, 4]</code></pre>
<p>Now we’re dealing with much smaller pieces!</p>
<p>Let’s count the work at each level:</p>
<ul>
<li>Level 2: Sorting 4 numbers and 5 numbers (easier than 9!)</li>
<li>Level 3: Sorting pairs and triples (even easier!)</li>
</ul>
<p>For even larger arrays, this pattern becomes more valuable. Take [15, 3, 9, 8, 2, 7, 1, 14, 12, 10, 4, 6, 5, 13, 11]:</p>
<pre><code>With one split:
[15, 3, 9, 8, 2, 7, 1] | [14, 12, 10, 4, 6, 5, 13, 11]
Still need to sort 7-8 numbers each side (quite a bit of work!)

With two splits:
Level 1: [15, 3, 9, 8, 2, 7, 1, 14, 12, 10, 4, 6, 5, 13, 11]
Level 2: [15, 3, 9, 8] | [2, 7, 1, 14] | [12, 10, 4, 6] | [5, 13, 11]
Now dealing with groups of 4 (much better!)

With three splits:
Level 3: [15, 3] | [9, 8] | [2, 7] | [1, 14] | [12, 10] | [4, 6] | [5, 13] | [11]
Just pairs and singles (really easy!)</code></pre>
<p>Do you see the pattern emerging? As our input gets larger:</p>
<ol type="1">
<li>One split helps some</li>
<li>Two splits helps more</li>
<li>Three splits helps even more</li>
<li>And so on…</li>
</ol>
<p>For really large arrays, we’d want to keep splitting until we can’t split anymore. When do we stop? When we get down to single elements - which are already sorted by definition!</p>
<p>This leads us to a powerful insight: instead of arbitrarily choosing how many times to split, why not just keep splitting recursively until we reach single elements? When do we stop? When we get down to single elements and can’t split anymore!</p>
<p>Actually, now that you think about it, single element arrays are already sorted! Meaning we can just use our existing merge code to combine them back together.</p>
</section>
<section id="making-our-code-split-recursively" class="level2" data-number="39.5">
<h2 data-number="39.5" class="anchored" data-anchor-id="making-our-code-split-recursively"><span class="header-section-number">39.5</span> Making Our Code Split Recursively</h2>
<p>Let’s look back at our current implementation:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode java code-with-copy"><code class="sourceCode java"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="dt">static</span> <span class="dt">void</span> <span class="fu">splitAndMergeSort</span><span class="op">(</span><span class="dt">int</span><span class="op">[]</span> arr<span class="op">)</span> <span class="op">{</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>arr<span class="op">.</span><span class="fu">length</span> <span class="op">&lt;=</span> <span class="dv">1</span><span class="op">)</span> <span class="cf">return</span><span class="op">;</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> mid <span class="op">=</span> arr<span class="op">.</span><span class="fu">length</span> <span class="op">/</span> <span class="dv">2</span><span class="op">;</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span><span class="op">[]</span> left <span class="op">=</span> <span class="bu">Arrays</span><span class="op">.</span><span class="fu">copyOfRange</span><span class="op">(</span>arr<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> mid<span class="op">);</span></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span><span class="op">[]</span> right <span class="op">=</span> <span class="bu">Arrays</span><span class="op">.</span><span class="fu">copyOfRange</span><span class="op">(</span>arr<span class="op">,</span> mid<span class="op">,</span> arr<span class="op">.</span><span class="fu">length</span><span class="op">);</span></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">insertionSort</span><span class="op">(</span>left<span class="op">);</span>    <span class="co">// &lt;-- This is interesting...</span></span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">insertionSort</span><span class="op">(</span>right<span class="op">);</span>   <span class="co">// &lt;-- And this too...</span></span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Merge code...</span></span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Notice something about these insertionSort calls? We’re using them to ensure each half is sorted before merging. But we just discovered that splitting recursively until we reach single elements could work better! Single elements are already sorted, so we can just merge them back together using our existing merge procedure.</p>
<p>So then why not use splitAndMergeSort itself on each half? After all, splitAndMergeSort already knows how to:</p>
<ol type="1">
<li>Take an array of any size</li>
<li>Split it into smaller pieces</li>
<li>Ensure those pieces end up sorted</li>
<li>Merge them back together</li>
</ol>
<p>Let’s trace what would happen with a simple example: [7, 2, 4, 1, 5, 3]</p>
<p>Let’s trace what would happen if we used splitAndMergeSort recursively. Take this example:</p>
<pre><code>[7, 2, 4, 1, 5, 3]</code></pre>
<p>Try drawing out what would happen if splitAndMergeSort called itself instead of insertionSort. Start with just the splitting part:</p>
<p>[Space for drawing the recursion tree…]</p>
<p>Here’s the first split:</p>
<pre><code>         [7, 2, 4, 1, 5, 3]
         /              \
   [7, 2, 4]         [1, 5, 3]</code></pre>
<p>What would happen to [7, 2, 4]? It would get split again:</p>
<pre><code>         [7, 2, 4, 1, 5, 3]
         /              \
   [7, 2, 4]         [1, 5, 3]
   /        \
[7]      [2, 4]</code></pre>
<p>Can you continue this tree? Draw out all the splits before reading further.</p>
<p>[Space for completing the tree…]</p>
<p>Eventually we get:</p>
<pre><code>              [7, 2, 4, 1, 5, 3]
              /              \
        [7, 2, 4]         [1, 5, 3]
        /        \         /       \
     [7]      [2, 4]    [1]    [5, 3]
              /    \           /     \
            [2]    [4]       [5]    [3]</code></pre>
<p>Now, starting from the bottom:</p>
<ol type="1">
<li>Merge [2] and [4] -&gt; [2, 4]</li>
<li>Merge [2, 4] with [7] -&gt; [2, 4, 7]</li>
<li>Merge [5] and [3] -&gt; [3, 5]</li>
<li>Merge [3, 5] with [1] -&gt; [1, 3, 5]</li>
<li>Finally merge [2, 4, 7] and [1, 3, 5] -&gt; [1, 2, 3, 4, 5, 7]</li>
</ol>
<p>Try tracing through this with a small example of your own before continuing…</p>
<p>[Space for trying your own example…]</p>
<p>Should we try modifying our code to use this recursive approach? Here’s a template:</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode java code-with-copy"><code class="sourceCode java"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="dt">static</span> <span class="dt">void</span> <span class="fu">mergeSort</span><span class="op">(</span><span class="dt">int</span><span class="op">[]</span> arr<span class="op">)</span> <span class="op">{</span> <span class="co">// &lt;-- We're changing this name</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>arr<span class="op">.</span><span class="fu">length</span> <span class="op">&lt;=</span> <span class="dv">1</span><span class="op">)</span> <span class="cf">return</span><span class="op">;</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> mid <span class="op">=</span> arr<span class="op">.</span><span class="fu">length</span> <span class="op">/</span> <span class="dv">2</span><span class="op">;</span></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span><span class="op">[]</span> left <span class="op">=</span> <span class="bu">Arrays</span><span class="op">.</span><span class="fu">copyOfRange</span><span class="op">(</span>arr<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> mid<span class="op">);</span></span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span><span class="op">[]</span> right <span class="op">=</span> <span class="bu">Arrays</span><span class="op">.</span><span class="fu">copyOfRange</span><span class="op">(</span>arr<span class="op">,</span> mid<span class="op">,</span> arr<span class="op">.</span><span class="fu">length</span><span class="op">);</span></span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>    <span class="co">// What should go here instead of insertionSort calls?</span></span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Merge code stays the same</span></span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Here is a complete visualization of the recursion tree:</p>
<pre><code>Splitting Phase:                                  Merging Phase:
                                                 
[7, 2, 4, 1, 5, 3]                              [1, 2, 3, 4, 5, 7]
↙               ↘                                ↖               ↗
[7, 2, 4]    [1, 5, 3]         →        [2, 4, 7]    [1, 3, 5]
↙     ↘      ↙     ↘                     ↖     ↗      ↖     ↗
[7]  [2,4]  [1]  [5,3]         →        [7]  [2,4]  [1]  [3,5]
    ↙   ↘       ↙   ↘                        ↖   ↗       ↖   ↗
    [2] [4]     [5] [3]        →            [2] [4]     [5] [3]

Let's follow one merge path in detail:
[2] and [4] merge into [2,4]:
  Compare: 2 &lt; 4  →  Take 2  →  Take 4

[2,4] and [7] merge into [2,4,7]:
  Compare: 2 &lt; 7  →  Take 2
  Compare: 4 &lt; 7  →  Take 4
  Only 7 remains  →  Take 7

[2,4,7] and [1,3,5] merge into final result:
  Compare: 2 &gt; 1  →  Take 1
  Compare: 2 &lt; 3  →  Take 2
  Compare: 4 &gt; 3  →  Take 3
  Compare: 4 &lt; 5  →  Take 4
  Compare: 7 &gt; 5  →  Take 5
  Only 7 remains  →  Take 7</code></pre>
<p>This visualization shows both phases of merge sort:</p>
<ol type="1">
<li>Splitting phase (left side): we keep dividing until we get to single elements</li>
<li>Merging phase (right side): we combine sorted pieces into larger sorted arrays</li>
</ol>
<p>Each arrow (↙↘) in the splitting phase shows where we divide the array Each arrow (↖↗) in the merging phase shows which pieces we’re combining</p>
<p>Notice how we can trace any piece of the final sorted array back through its merging steps to see how it got to its final position!</p>
</section>
<section id="understanding-the-efficiency" class="level2" data-number="39.6">
<h2 data-number="39.6" class="anchored" data-anchor-id="understanding-the-efficiency"><span class="header-section-number">39.6</span> Understanding the Efficiency</h2>
<p>Before we analyze our complete algorithm, let’s understand how much work each part does. First, let’s look at merging.</p>
<section id="the-merge-step" class="level3" data-number="39.6.1">
<h3 data-number="39.6.1" class="anchored" data-anchor-id="the-merge-step"><span class="header-section-number">39.6.1</span> The Merge Step</h3>
<p>Remember our merge process? We look at the front of both arrays and pick the smaller element each time. Let’s count the steps for merging [2, 4, 7] and [1, 3, 5]:</p>
<pre><code>Step 1: Compare 2 and 1
        Take 1
        Arrays: [2, 4, 7] and [3, 5]
        Result: [1]

Step 2: Compare 2 and 3
        Take 2
        Arrays: [4, 7] and [3, 5]
        Result: [1, 2]

Step 3: Compare 4 and 3
        Take 3
        Arrays: [4, 7] and [5]
        Result: [1, 2, 3]</code></pre>
<p>…and so on.</p>
<p>How many steps do we take? Each step puts one number in its final position, and we need to place all numbers. So if we’re merging arrays with a total of N numbers, we do N steps.</p>
<p>Try counting steps yourself for merging [1, 3, 5] and [2, 4, 6, 8]. How many steps?</p>
<p>[Space for counting…]</p>
</section>
<section id="the-complete-picture" class="level3" data-number="39.6.2">
<h3 data-number="39.6.2" class="anchored" data-anchor-id="the-complete-picture"><span class="header-section-number">39.6.2</span> The Complete Picture</h3>
<p>Now let’s look at our whole process. Draw out what happens with [7, 2, 4, 1, 5, 3]:</p>
<pre><code>Level 1 (Split):      [7, 2, 4, 1, 5, 3]
                      /                \
Level 2:        [7, 2, 4]          [1, 5, 3]
                /         \         /        \
Level 3:     [7]       [2, 4]    [1]      [5, 3]
                      /     \            /      \
Level 4:           [2]     [4]        [5]      [3]</code></pre>
<p>Now when we merge back up, we get another tree, but upside down:</p>
<pre><code>Level 4:           [2]     [4]        [5]      [3]
                      \     /            \      /
Level 3:            [2, 4]              [3, 5]
                         \                /
Level 2:              [2, 4, 7]    [1, 3, 5]
                              \    /
Level 1 (Merge):       [1, 2, 3, 4, 5, 7]</code></pre>
<p>Look carefully at each level. How many total elements are we handling at each level?</p>
<ul>
<li>Level 4: [2], [4], [5], [3] -&gt; 4 numbers</li>
<li>Level 3: [2, 4], [3, 5] -&gt; 4 numbers</li>
<li>Level 2: [2, 4, 7], [1, 3, 5] -&gt; 6 numbers</li>
<li>Level 1: [1, 2, 3, 4, 5, 7] -&gt; 6 numbers</li>
</ul>
<p>Try this with your own example - do you notice something about the total numbers at each level?</p>
<p>[Space for thinking…]</p>
<p>The key insight: At each level, we’re still working with all N numbers, just split up differently!</p>
<p>And at each level, we’re doing a total of N steps of work (either splitting or merging).</p>
<p>So our total work is:</p>
<pre><code>(N steps per level) × (number of levels)</code></pre>
<p>But how many levels are there? Look back at our trees. What determines the number of levels?</p>
<p>[Space for thinking…]</p>
<p>Each split divides our groups in half. We keep splitting until we can’t anymore (when we hit single elements). How many times can you divide N by 2 before you get to 1?</p>
<p>Let’s try with N = 8: 8 → 4 → 2 → 1 (3 steps) With N = 16: 16 → 8 → 4 → 2 → 1 (4 steps)</p>
<p>This special number (how many times you can divide by 2) has a name - it’s the logarithm base 2! We write it as log₂(N).</p>
<p>Think about why this makes sense:</p>
<ul>
<li>When N = 8: We divide by 2 three times (8 → 4 → 2 → 1), so log₂(8) = 3</li>
<li>When N = 16: We divide by 2 four times (16 → 8 → 4 → 2 → 1), so log₂(16) = 4</li>
</ul>
<p>Each time we double our input size, we need just one more split. That’s pretty efficient!</p>
<blockquote class="blockquote">
<p>Wondering about logarithms? Here’s a helpful way to think about them: if you keep dividing a number by 2 until you get to 1, the number of divisions you had to do is the logarithm base 2 of your starting number. For example:</p>
<ul>
<li>32 → 16 → 8 → 4 → 2 → 1 (5 divisions, so log₂(32) = 5)</li>
</ul>
</blockquote>
</section>
</section>
<section id="putting-it-all-together" class="level2" data-number="39.7">
<h2 data-number="39.7" class="anchored" data-anchor-id="putting-it-all-together"><span class="header-section-number">39.7</span> Putting It All Together</h2>
<p>Let’s summarize what we’ve discovered:</p>
<ol type="1">
<li>At each level of our trees:
<ul>
<li>We handle all N elements</li>
<li>Either splitting them up (in the first tree)</li>
<li>Or merging them together (in the second tree)</li>
</ul></li>
<li>The number of levels:
<ul>
<li>Each split divides groups in half</li>
<li>We stop when we reach size 1</li>
<li>For N=16: 16 → 8 → 4 → 2 → 1 (4 levels)</li>
<li>For N=32: 32 → 16 → 8 → 4 → 2 → 1 (5 levels)</li>
<li>This is log₂(N) levels</li>
</ul></li>
<li>Total work:
<ul>
<li>N work per level</li>
<li>log₂(N) levels</li>
<li>Two trees (splitting and merging)</li>
<li>So: 2 × N × log₂(N) total steps</li>
</ul></li>
</ol>
<p>This means our algorithm is O(N log N). Is this better than our original O(N²)?</p>
<p>Let’s compare with some actual numbers:</p>
<pre><code>N      |    N²    |  N log₂(N)
--------------------------------
8      |    64    |     24
16     |   256    |     64
32     |  1024    |    160
64     |  4096    |    384
128    | 16384    |    896</code></pre>
<p>Try adding a few more rows yourself! What do you notice about how these numbers grow?</p>
<p>[Space for calculations…]</p>
<p>Remember our original problem? We wanted to do better than checking every element against every other element (N²). And we did! Instead of the work doubling four times when we double N (like in N²), it only doubles three times (like in N log N).</p>
</section>
<section id="one-more-thing-to-think-about" class="level2" data-number="39.8">
<h2 data-number="39.8" class="anchored" data-anchor-id="one-more-thing-to-think-about"><span class="header-section-number">39.8</span> One More Thing to Think About</h2>
<p>While we’ve figured out how much time our algorithm takes, there’s something else we should consider. Look back at our code - what resources are we using besides time?</p>
<p>Take a moment to think about what happens in memory when we run our algorithm…</p>
<p>[Space for thinking…]</p>
<p>Did you notice that we’re creating new arrays at each split?</p>
<ul>
<li>First split: two arrays of size N/2</li>
<li>Next splits: four arrays of size N/4</li>
<li>And so on…</li>
</ul>
<p>Plus, when we merge, we need space to store our temporary results.</p>
<p>Try drawing out all the arrays we create when sorting [7, 2, 4, 1, 5, 3]. How much extra space are we using?</p>
<pre><code>Memory Usage During Split Phase:
                                              Extra Space
Original:  [7, 2, 4, 1, 5, 3]                    Used: 0
           ↓
Level 1:   [7, 2, 4 | 1, 5, 3]
           ↓
Split 1:   [7, 2, 4] and [1, 5, 3]               Used: N
           ↓
Level 2:   [7 | 2, 4] and [1 | 5, 3]
           ↓
Split 2:   [7] and [2, 4] and [1] and [5, 3]     Used: N
           ↓
Level 3:   [7] and [2 | 4] and [1] and [5 | 3]
           ↓
Split 3:   [7] [2] [4] [1] [5] [3]               Used: N

Memory Snapshot at Deepest Level:
┌─────────────────────────┐
│ Original Array          │
│ [7, 2, 4, 1, 5, 3]      │ N spaces
├─────────────────────────┤
│ Temporary Arrays        │
│ Left: [7, 2, 4]         │ N/2 spaces
│ Right: [1, 5, 3]        │ N/2 spaces
│                         │
│ Working Arrays          │
│ [7] [2] [4]             │ } Together
│ [1] [5] [3]             │ } use N spaces
└─────────────────────────┘

Total peak memory: Original array (N) + Temporary arrays (N)
                 = 2N spaces

Key Insight: While we create many small arrays, we reuse space!
When merging [2] and [4], we discard these arrays after creating [2,4].
The space gets reused for the next merge.</code></pre>
<p>Memory Usage During Critical Merge Steps:</p>
<pre><code>Step 1: Merging [2] and [4]
[7] │ [2] [4] │ [1] │ [5] [3]   ← Active arrays
    │   ↓↓↓   │     │
[7] │  [2,4]  │ [1] │ [5] [3]   Memory freed: small arrays reused

Step 2: Merging [2,4] with [7]
[7]  ←→  [2,4] │ [1] │ [5,3]    ← Notice: previous level's space reused
     ↓↓↓       │     │
   [2,4,7]     │ [1] │ [5,3]    

Final Merge: [2,4,7] with [1,3,5]

     [2,4,7] ←--→ [1,3,5]     ← Only one merge active at a time
              ↓↓↓
         [1,2,3,4,5,7]        ← Final result in original array</code></pre>
<p>Interesting observation: while we’re creating many arrays, we’re not using them all at the same time. At any moment:</p>
<ol type="1">
<li>We’re splitting one array into two pieces, OR</li>
<li>We’re merging two arrays back together</li>
</ol>
<p>The most space we need at once is about the same as the size of our original array (N).</p>
<p>This extra space usage is what computer scientists call “space complexity” - and for our merge sort, it’s O(N). This means we need extra space proportional to the size of our input.</p>
<p>Is this a problem? Well, it depends! If we’re sorting a small array, probably not. But what if we were sorting millions of numbers? Or what if we were sorting on a device with limited memory?</p>
<p>These are the kinds of questions that lead computer scientists to develop variations of merge sort that use less extra space - but that’s a puzzle for another day!</p>
</section>
<section id="the-final-algorithm" class="level2" data-number="39.9">
<h2 data-number="39.9" class="anchored" data-anchor-id="the-final-algorithm"><span class="header-section-number">39.9</span> The Final Algorithm</h2>
<p>Here’s our complete merge sort implementation:</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode java code-with-copy"><code class="sourceCode java"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">class</span> MergeSort <span class="op">{</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="dt">static</span> <span class="dt">void</span> <span class="fu">sort</span><span class="op">(</span><span class="dt">int</span><span class="op">[]</span> arr<span class="op">)</span> <span class="op">{</span></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>        <span class="co">// Base case: arrays of size 0 or 1 are sorted</span></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>arr<span class="op">.</span><span class="fu">length</span> <span class="op">&lt;=</span> <span class="dv">1</span><span class="op">)</span> <span class="cf">return</span><span class="op">;</span></span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a>        <span class="co">// Split array in half</span></span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> mid <span class="op">=</span> arr<span class="op">.</span><span class="fu">length</span> <span class="op">/</span> <span class="dv">2</span><span class="op">;</span></span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span><span class="op">[]</span> left <span class="op">=</span> <span class="bu">Arrays</span><span class="op">.</span><span class="fu">copyOfRange</span><span class="op">(</span>arr<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> mid<span class="op">);</span></span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span><span class="op">[]</span> right <span class="op">=</span> <span class="bu">Arrays</span><span class="op">.</span><span class="fu">copyOfRange</span><span class="op">(</span>arr<span class="op">,</span> mid<span class="op">,</span> arr<span class="op">.</span><span class="fu">length</span><span class="op">);</span></span>
<span id="cb29-10"><a href="#cb29-10" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb29-11"><a href="#cb29-11" aria-hidden="true" tabindex="-1"></a>        <span class="co">// Recursively sort each half</span></span>
<span id="cb29-12"><a href="#cb29-12" aria-hidden="true" tabindex="-1"></a>        <span class="fu">sort</span><span class="op">(</span>left<span class="op">);</span></span>
<span id="cb29-13"><a href="#cb29-13" aria-hidden="true" tabindex="-1"></a>        <span class="fu">sort</span><span class="op">(</span>right<span class="op">);</span></span>
<span id="cb29-14"><a href="#cb29-14" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb29-15"><a href="#cb29-15" aria-hidden="true" tabindex="-1"></a>        <span class="co">// Merge the sorted halves</span></span>
<span id="cb29-16"><a href="#cb29-16" aria-hidden="true" tabindex="-1"></a>        <span class="fu">merge</span><span class="op">(</span>arr<span class="op">,</span> left<span class="op">,</span> right<span class="op">);</span></span>
<span id="cb29-17"><a href="#cb29-17" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb29-18"><a href="#cb29-18" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb29-19"><a href="#cb29-19" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> <span class="dt">static</span> <span class="dt">void</span> <span class="fu">merge</span><span class="op">(</span><span class="dt">int</span><span class="op">[]</span> arr<span class="op">,</span> <span class="dt">int</span><span class="op">[]</span> left<span class="op">,</span> <span class="dt">int</span><span class="op">[]</span> right<span class="op">)</span> <span class="op">{</span></span>
<span id="cb29-20"><a href="#cb29-20" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> leftPos <span class="op">=</span> <span class="dv">0</span><span class="op">,</span> rightPos <span class="op">=</span> <span class="dv">0</span><span class="op">,</span> arrPos <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb29-21"><a href="#cb29-21" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb29-22"><a href="#cb29-22" aria-hidden="true" tabindex="-1"></a>        <span class="co">// While we have elements in both halves,</span></span>
<span id="cb29-23"><a href="#cb29-23" aria-hidden="true" tabindex="-1"></a>        <span class="co">// take the smaller of the two</span></span>
<span id="cb29-24"><a href="#cb29-24" aria-hidden="true" tabindex="-1"></a>        <span class="cf">while</span> <span class="op">(</span>leftPos <span class="op">&lt;</span> left<span class="op">.</span><span class="fu">length</span> <span class="op">&amp;&amp;</span> rightPos <span class="op">&lt;</span> right<span class="op">.</span><span class="fu">length</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb29-25"><a href="#cb29-25" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="op">(</span>left<span class="op">[</span>leftPos<span class="op">]</span> <span class="op">&lt;=</span> right<span class="op">[</span>rightPos<span class="op">])</span> <span class="op">{</span></span>
<span id="cb29-26"><a href="#cb29-26" aria-hidden="true" tabindex="-1"></a>                arr<span class="op">[</span>arrPos<span class="op">++]</span> <span class="op">=</span> left<span class="op">[</span>leftPos<span class="op">++];</span></span>
<span id="cb29-27"><a href="#cb29-27" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb29-28"><a href="#cb29-28" aria-hidden="true" tabindex="-1"></a>                arr<span class="op">[</span>arrPos<span class="op">++]</span> <span class="op">=</span> right<span class="op">[</span>rightPos<span class="op">++];</span></span>
<span id="cb29-29"><a href="#cb29-29" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb29-30"><a href="#cb29-30" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb29-31"><a href="#cb29-31" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb29-32"><a href="#cb29-32" aria-hidden="true" tabindex="-1"></a>        <span class="co">// Copy remaining elements from left half</span></span>
<span id="cb29-33"><a href="#cb29-33" aria-hidden="true" tabindex="-1"></a>        <span class="cf">while</span> <span class="op">(</span>leftPos <span class="op">&lt;</span> left<span class="op">.</span><span class="fu">length</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb29-34"><a href="#cb29-34" aria-hidden="true" tabindex="-1"></a>            arr<span class="op">[</span>arrPos<span class="op">++]</span> <span class="op">=</span> left<span class="op">[</span>leftPos<span class="op">++];</span></span>
<span id="cb29-35"><a href="#cb29-35" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb29-36"><a href="#cb29-36" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb29-37"><a href="#cb29-37" aria-hidden="true" tabindex="-1"></a>        <span class="co">// Copy remaining elements from right half</span></span>
<span id="cb29-38"><a href="#cb29-38" aria-hidden="true" tabindex="-1"></a>        <span class="cf">while</span> <span class="op">(</span>rightPos <span class="op">&lt;</span> right<span class="op">.</span><span class="fu">length</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb29-39"><a href="#cb29-39" aria-hidden="true" tabindex="-1"></a>            arr<span class="op">[</span>arrPos<span class="op">++]</span> <span class="op">=</span> right<span class="op">[</span>rightPos<span class="op">++];</span></span>
<span id="cb29-40"><a href="#cb29-40" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb29-41"><a href="#cb29-41" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb29-42"><a href="#cb29-42" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>What started as a simple idea - “what if we split the array in half?” - led us to discover one of computer science’s most elegant and efficient sorting algorithms. By carefully thinking about how to combine sorted pieces and understanding the role of recursion, we created something better than our original approach.</p>
<p>Can you think of any ways to make it even better?</p>
<ul>
<li>What if we wanted to sort strings instead of numbers?</li>
<li>What if we wanted to avoid creating new arrays for each split?</li>
<li>What if we had so many numbers they didn’t all fit in memory?</li>
</ul>
<p>These questions lead to even more interesting algorithms… but that’s a story for another day!</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./19_binary_search.html" class="pagination-link" aria-label="Binary Search">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">38</span>&nbsp; <span class="chapter-title">Binary Search</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./20_trees.html" class="pagination-link" aria-label="Tree Data Structure">
        <span class="nav-page-text"><span class="chapter-number">40</span>&nbsp; <span class="chapter-title">Tree Data Structure</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




</body></html>